<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link th:rel="stylesheet" th:href="@{/webjars/bootstrap/5.1.3/css/bootstrap.min.css}" />

    <link rel="stylesheet" th:href="@{/css/application.css}">
    <title>Books</title>
</head>


<body>
    <nav th:replace="~{navbar :: navbar('Books')}"></nav>
    <div class="container">
        <div class="content">


            <h1 class="text-center py-3">Book</h1>
            <hr />


            <form id="book-form" th:object="${book}" th:action="@{/books/create}" method="post">
                <ul th:if="${#fields.hasErrors('*')}">
                    <li th:each="err : ${#fields.errors('*')}" th:text="${err}">Input is incorrect</li>
                </ul>
                <div class="row">
                    <!-- dati book-->
                    <div class="col-8">
                        <div class="row gy-2">
                            <div class="col-12">
                                <label class="form-label" for="title">Title</label>
                                <input id="title" type="text" class="form-control" th:field="*{title}" th:errorClass="is-invalid">
                                <div th:if="${#fields.hasErrors('title')}" class="invalid-feedback">
                                    <ul>
                                        <li th:each="err : ${#fields.errors('title')}" th:text="${err}"></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-12">
                                <label class="form-label" for="author">Author</label>
                                <input id="author" type="text" class="form-control" th:field="*{author}"  th:errorClass="is-invalid">
                                <div th:if="${#fields.hasErrors('author')}" class="invalid-feedback">
                                    <ul>
                                        <li th:each="err : ${#fields.errors('author')}" th:text="${err}"></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-12">
                                <label class="form-label" for="publisher">Publisher</label>
                                <input id="publisher" type="text" class="form-control" th:field="*{publisher}"  th:errorClass="is-invalid">
                                <div th:if="${#fields.hasErrors('publisher')}" class="invalid-feedback">
                                    <ul>
                                        <li th:each="err : ${#fields.errors('publisher')}" th:text="${err}"></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-2">
                                <label class="form-label" for="year">Year</label>
                                <input id="year" type="number" class="form-control" th:field="*{year}"  th:errorClass="is-invalid">
                                <div th:if="${#fields.hasErrors('year')}" class="invalid-feedback">
                                    <ul>
                                        <li th:each="err : ${#fields.errors('year')}" th:text="${err}"></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-2">
                                <label class="form-label" for="copies">Copies</label>
                                <input id="copies" type="number" class="form-control" th:field="*{numberOfCopies}"  th:errorClass="is-invalid">
                                <div th:if="${#fields.hasErrors('numberOfCopies')}" class="invalid-feedback">
                                    <ul>
                                        <li th:each="err : ${#fields.errors('numberOfCopies')}" th:text="${err}"></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-5">
                                <label class="form-label" for="isbn">ISBN</label>
                                <input id="isbn" type="text" class="form-control" th:field="*{isbn}"  th:errorClass="is-invalid">
                                <div th:if="${#fields.hasErrors('isbn')}" class="invalid-feedback">
                                    <ul>
                                        <li th:each="err : ${#fields.errors('isbn')}" th:text="${err}"></li>
                                    </ul>
                                </div>
                            </div>
                            <!-- Salvataggio -->
                            <div class="col-12">
                                <button class="btn btn-primary" type="submit">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-check" viewBox="0 0 16 16">
                                        <path
                                            d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z" />
                                    </svg>
                                    Save </button>
                                <a th:href="@{/books}" class="btn btn-danger"> Cancel</a>
                            </div>
                        </div>
                    </div>
                    <!-- categories -->
                     <div class="col-4">
                        <h4>Categories</h4>
                        <div class="form-check" th:each="cat : ${categoryList}">
                            <input class="form-check-input" type="checkbox" th:id="|category_${cat.id}|" 
                                    th:value="${cat.id}" th:field="*{categories}">

                            <label class="form-check-label" th:for="|category_${cat.id}|" th:text="${cat.category}"></label>

                        </div>
                     </div>
                </div>

            </form>
        </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script th:src="@{/webjars/bootstrap/5.1.3/js/bootstrap.bundle.min.js}"></script>
</body>

</html>